<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title><3</title>
<style>
  html,body{
    margin:0;
    height:100%;
    background:#000;
    overflow:hidden;
    font-family:Arial, sans-serif;
    color:#fff;
  }

  .wrap{
    width:100vw;
    height:100vh;
    overflow:hidden;
    position:relative;
    background:#000;
  }

  .track{
    display:flex;
    height:100%;
    transition:transform .35s ease;
    will-change:transform;
    touch-action: none; /* ← ДОБАВИТЬ ЭТО */
   }

  .slide{
    min-width:100vw;
    height:100vh;
    background:#000;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
  }

  /* ✔ ПК-режим: как у тебя было, всё правильно */
  .slide img{
    height:100%;
    width:auto;
    object-fit:contain;
    pointer-events:none;
    user-select:none;
    display:block;
  }

  /* ✔ ТЕЛЕФОН ПОРТРЕТНО — касаемся краёв по ширине */
  @media screen and (max-width:768px) and (orientation:portrait) {
    .slide img{
      width:100vw;
      height:auto;
      object-fit:cover;
    }
  }

  .dots{
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    gap:10px;
  }
  .dot{
    width:10px;
    height:10px;
    background:#444;
    border-radius:50%;
    transition:.25s;
  }
  .dot.active{
    background:#fff;
    transform:scale(1.6);
  }

  .counter{
    position:absolute;
    left:15px;
    bottom:15px;
    padding:6px 10px;
    font-size:16px;
    background:rgba(255,255,255,0.12);
    border-radius:6px;
  }
</style>
</head>
<body>

<div class="wrap">
  <div id="track" class="track"></div>
  <div id="dots" class="dots"></div>
  <div id="counter" class="counter"></div>
</div>

<script>
const EXTS=["png","jpg","jpeg","webp"];
const MAX=50;

async function exists(url){
  return new Promise(res=>{
    const i=new Image();
    i.onload=()=>res(true);
    i.onerror=()=>res(false);
    i.src=url;
  });
}

async function load(){
  let arr=[];
  for(let n=1;n<=MAX;n++){
    let found=null;
    for(let e of EXTS){
      const u=`images/${n}.${e}`;
      if(await exists(u)){ found=u; break; }
    }
    if(found) arr.push(found);
  }
  return arr;
}

let images=[];
let index=0;
let drag=false;
let startX=0;
let baseX=0;

const track=document.getElementById("track");
const dots=document.getElementById("dots");
const counter=document.getElementById("counter");

function render(){
  track.innerHTML="";
  dots.innerHTML="";

  images.forEach((src,i)=>{
    const slide=document.createElement("div");
    slide.className="slide";
    slide.innerHTML=`<img src="${src}">`;
    track.appendChild(slide);

    const d=document.createElement("div");
    d.className="dot";
    dots.appendChild(d);
  });

  update();
}

function update(){
  track.style.transform=`translateX(${-index*window.innerWidth}px)`;

  [...dots.children].forEach((d,i)=>{
    d.classList.toggle("active", i===index);
  });

  counter.textContent=`${index+1} / ${images.length}`;
}

/* свайп */
track.addEventListener("pointerdown", e=>{
  drag=true;
  startX=e.clientX;
  baseX=-index*window.innerWidth;
  track.style.transition="none";
});

window.addEventListener("pointermove", e=>{
  if(!drag) return;
  const dx=e.clientX-startX;
  track.style.transform=`translateX(${baseX+dx}px)`;
});

window.addEventListener("pointerup", e=>{
  if(!drag) return;
  drag=false;
  track.style.transition="transform .35s ease";

  const dx=e.clientX-startX;
  const tr=window.innerWidth * 0.15;

  if(dx < -tr && index < images.length-1) index++;
  else if(dx > tr && index > 0) index--;

  update();
});

/* стрелки */
window.addEventListener("keydown", e=>{
  if(e.key==="ArrowRight" && index < images.length-1){ index++; update(); }
  if(e.key==="ArrowLeft" && index > 0){ index--; update(); }
});

(async()=>{
  images = await load();
  if(images.length===0){
    track.innerHTML="<div class='slide'><div style='color:#777;font-size:20px'>Нет изображений</div></div>";
    return;
  }
  render();
})();
</script>

</body>
</html>

